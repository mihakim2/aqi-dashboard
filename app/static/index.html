<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How's the Air? - West Roseville</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
</head>
<body>
    <div class="dashboard">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>ğŸŒ¬ï¸ How's the Air?</h1>
                <div class="sensor-info">
                    <span id="sensorName">Loading...</span>
                    <span class="location">ğŸ“ West Roseville, CA</span>
                </div>
            </div>
            <div class="last-update">
                Updated: <span id="lastUpdate">--</span>
                <button id="refreshBtn" class="refresh-btn" title="Refresh data">ğŸ”„</button>
            </div>
        </header>

        <!-- Main AQI Display -->
        <section class="aqi-hero">
            <div class="aqi-gauge" id="aqiGauge">
                <div class="aqi-value" id="aqiValue">--</div>
                <div class="aqi-label">AQI</div>
            </div>
            <div class="aqi-details">
                <div class="aqi-category" id="aqiCategory">Loading...</div>
                <p class="aqi-message" id="aqiMessage">Fetching the vibe outside...</p>
                <div class="cigarettes-info">
                    <span class="cigarette-icon">ğŸš¬</span>
                    <span class="cigarette-value">â‰ˆ <span id="cigarettes">--</span> cigs/day</span>
                </div>
            </div>
        </section>

        <!-- Current Readings -->
        <section class="readings-grid">
            <div class="reading-card">
                <div class="reading-icon">ğŸ’¨</div>
                <div class="reading-value"><span id="pm25">--</span> <small>Âµg/mÂ³</small></div>
                <div class="reading-label">PM2.5</div>
                <div class="reading-desc">Tiny particles that sneak into your lungs</div>
            </div>
            <div class="reading-card">
                <div class="reading-icon">ğŸŒ«ï¸</div>
                <div class="reading-value"><span id="pm10">--</span> <small>Âµg/mÂ³</small></div>
                <div class="reading-label">PM10</div>
                <div class="reading-desc">Bigger dust & pollen bits</div>
            </div>
            <div class="reading-card">
                <div class="reading-icon">ğŸŒ¡ï¸</div>
                <div class="reading-value"><span id="temperature">--</span><small>Â°F</small></div>
                <div class="reading-label">Temp</div>
                <div class="reading-desc">How toasty is it?</div>
            </div>
            <div class="reading-card">
                <div class="reading-icon">ğŸ’§</div>
                <div class="reading-value"><span id="humidity">--</span><small>%</small></div>
                <div class="reading-label">Humidity</div>
                <div class="reading-desc">Moisture in the air</div>
            </div>
            <div class="reading-card">
                <div class="reading-icon">ğŸ“Š</div>
                <div class="reading-value"><span id="pressure">--</span> <small>bar</small></div>
                <div class="reading-label">Pressure</div>
                <div class="reading-desc">Atmospheric weight</div>
            </div>
            <div class="reading-card">
                <div class="reading-icon">âœ…</div>
                <div class="reading-value"><span id="confidence">--</span><small>%</small></div>
                <div class="reading-label">Confidence</div>
                <div class="reading-desc">How reliable is this data</div>
            </div>
        </section>

        <!-- AQI Scale Reference -->
        <section class="aqi-scale">
            <h3>What does AQI mean?</h3>
            <div class="scale-bar">
                <div class="scale-segment good">
                    <div class="scale-range">0-50</div>
                    <div class="scale-name">Good ğŸ‘</div>
                    <div class="scale-cig">~0.5 ğŸš¬</div>
                </div>
                <div class="scale-segment moderate">
                    <div class="scale-range">51-100</div>
                    <div class="scale-name">Meh ğŸ¤·</div>
                    <div class="scale-cig">~1.5 ğŸš¬</div>
                </div>
                <div class="scale-segment usg">
                    <div class="scale-range">101-150</div>
                    <div class="scale-name">Iffy ğŸ˜·</div>
                    <div class="scale-cig">~2.5 ğŸš¬</div>
                </div>
                <div class="scale-segment unhealthy">
                    <div class="scale-range">151-200</div>
                    <div class="scale-name">Bad ğŸ˜¬</div>
                    <div class="scale-cig">~5 ğŸš¬</div>
                </div>
                <div class="scale-segment very-unhealthy">
                    <div class="scale-range">201-300</div>
                    <div class="scale-name">Yikes ğŸ™ˆ</div>
                    <div class="scale-cig">~10 ğŸš¬</div>
                </div>
                <div class="scale-segment hazardous">
                    <div class="scale-range">301+</div>
                    <div class="scale-name">Danger â˜ ï¸</div>
                    <div class="scale-cig">15+ ğŸš¬</div>
                </div>
            </div>
        </section>

        <!-- Trend Charts -->
        <section class="charts-section">
            <div class="chart-header">
                <div class="chart-tabs">
                    <button class="chart-tab active" data-period="24h">Last 24h</button>
                    <button class="chart-tab" data-period="7d">Past Week</button>
                    <button class="chart-tab" data-period="30d">Past Month</button>
                </div>
                <div class="chart-legend" id="chartLegend">
                    <span class="legend-item"><span class="legend-line"></span> AQI</span>
                    <span class="legend-item iqr-legend" style="display:none;"><span class="legend-band"></span> Typical Range</span>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="trendChart"></canvas>
            </div>
            <div class="chart-stats" id="chartStats">
                <div class="stat">
                    <span class="stat-label">Average</span>
                    <span class="stat-value" id="avgAqi">--</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Worst</span>
                    <span class="stat-value" id="maxAqi">--</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Best</span>
                    <span class="stat-value" id="minAqi">--</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Typical</span>
                    <span class="stat-value" id="iqrRange">--</span>
                </div>
                <div class="stat">
                    <span class="stat-label">ğŸš¬/day</span>
                    <span class="stat-value" id="avgCigarettes">--</span>
                </div>
            </div>
        </section>

        <!-- Nearby Sensors -->
        <section class="nearby-section">
            <h3>ğŸ“ What about the neighbors?</h3>
            <div class="nearby-grid" id="nearbySensors">
                <div class="nearby-loading">Finding nearby sensors...</div>
            </div>
        </section>

        <!-- Dad Jokes Section -->
        <section class="jokes-section">
            <div class="joke-header">
                <span class="joke-emoji">ğŸ˜„</span>
                <h3>Dad Joke of the Moment</h3>
            </div>
            <div class="joke-content">
                <p id="dadJoke" class="dad-joke">Loading a fresh groaner...</p>
            </div>
            <button id="newJokeBtn" class="new-joke-btn">ğŸ² Another One!</button>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Data from <a href="https://www.purpleair.com" target="_blank">PurpleAir</a> â€¢ Sensor: <span id="sensorModel">--</span> â€¢ ID: <span id="sensorId">--</span></p>
            <p class="disclaimer">ğŸš¬ Cigarette equivalence via Berkeley Earth (22 Âµg/mÂ³ â‰ˆ 1 cig/day) â€¢ Not medical advice!</p>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
